<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TimeBankCU.Views.CalendarPage"
             Title="Calendar"
             xmlns:viewmodels="clr-namespace:TimeBankCU.ViewModels"
             x:DataType="viewmodels:CalendarViewModel">

    <ContentPage.BindingContext>
        <viewmodels:CalendarViewModel />
    </ContentPage.BindingContext>

    <ContentPage.Content>
        <StackLayout>

            <!-- Top Month Navigation -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="FillAndExpand" Padding="10">
                <Button Text="Previous" Command="{Binding PreviousMonthCommand}" />
                <Label Text="{Binding CurrentMonth}" HorizontalOptions="CenterAndExpand" VerticalOptions="Center" />
                <Button Text="Next" Command="{Binding NextMonthCommand}" />
            </StackLayout>

            <!-- Calendar View -->
            <CollectionView ItemsSource="{Binding Days}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Gray" CornerRadius="5" Padding="5" Margin="5">
                            <StackLayout>
                                <Label Text="{Binding Date}" FontAttributes="Bold" />
                                <CollectionView ItemsSource="{Binding Events}">
                                    <CollectionView.ItemTemplate>
                                        <DataTemplate>
                                            <Frame BorderColor="LightGray" CornerRadius="5" Padding="3" Margin="3">
                                                <Label Text="{Binding Title}" />
                                            </Frame>
                                        </DataTemplate>
                                    </CollectionView.ItemTemplate>
                                </CollectionView>
                            </StackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Floating Action Button -->
            <Button Text="+" Command="{Binding AddEventCommand}"
                    VerticalOptions="End" HorizontalOptions="End"
                    WidthRequest="60" HeightRequest="60"
                    CornerRadius="30" BackgroundColor="DodgerBlue"
                    TextColor="White" FontSize="Large" />

        </StackLayout>
    </ContentPage.Content>
</ContentPage>